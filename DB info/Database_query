CREATE TABLE parkings (
    id int PRIMARY key AUTO_INCREMENT,
    name varChar(50) ,
    nombre_total int ,
    surface float
);

CREATE TABLE type_members (
    id int PRIMARY KEY AUTO_INCREMENT,
 	lebelle varchar(50)
);

CREATE TABLE members (
    id int PRIMARY KEY AUTO_INCREMENT,
    name varchar(70) ,
    prenom varchar(70) ,
    debut_abonnement date ,
    fin_abonnement date,
    id_member_type int,
    FOREIGN KEY (id_member_type) REFERENCES type_members(id)
);

CREATE TABLE voitures (
    id int PRIMARY KEY AUTO_INCREMENT,
    matricule varchar(70) not null UNIQUE ,
    colour varchar(70),
    la_marque varchar(70),
    id_m int,
    FOREIGN key (id_m) REFERENCES members(id)
);

/**/

create table type_places (
	id int primary key AUTO_INCREMENT,
	libelle varchar(50)
);

create table places (
	id int primary key AUTO_INCREMENT,
	id_TP int,
    id_parking int,
	foreign key (id_TP) references  type_places(id),
	foreign key (id_parking) REFERENCES parkings(id)
);

create  table  reservations (
	id int primary key AUTO_INCREMENT,
	date_debut datetime,
	date_fin datetime,
	prix float,
	id_V int ,
    id_place int,
	foreign key(id_V) references  voitures(id),
	foreign key(id_place) references places(id)
);

create table sorties (
	id int primary key AUTO_INCREMENT,
	libelle varchar(50),
    id_parking int,
    foreign key (id_parking) REFERENCES parkings(id)
);

/**/

CREATE TABLE entrees (
	id int PRIMARY KEY AUTO_INCREMENT,
    libelle varchar(70) not null UNIQUE,
    id_parking int,
    FOREIGN KEY (id_parking) REFERENCES parkings(id)
);

CREATE TABLE equipements (
	id int PRIMARY KEY AUTO_INCREMENT,
    libelle varchar(70)
);

CREATE TABLE cameras (
	id int PRIMARY KEY AUTO_INCREMENT,
    id_equipement int,
    FOREIGN KEY(id_equipement) REFERENCES equipements(id)
);

CREATE TABLE cameras_p (
	id int PRIMARY KEY AUTO_INCREMENT,
    id_camera int,
    id_place int,
    FOREIGN KEY (id_camera) REFERENCES cameras(id),
    FOREIGN KEY (id_place) REFERENCES places(id)
);

CREATE TABLE guichets (
	id int PRIMARY KEY AUTO_INCREMENT,
    lebelle varchar(70) not null UNIQUE,
    id_equipement int,
	FOREIGN KEY (id_equipement) REFERENCES equipements(id)
);

CREATE TABLE guichets_s (
	id int PRIMARY KEY AUTO_INCREMENT,
    id_guichet int,
    id_sortie int,
    FOREIGN KEY (id_guichet) REFERENCES guichets(id),
    FOREIGN KEY (id_sortie) REFERENCES sorties(id)
);

CREATE TABLE guichets_e (
	id int PRIMARY KEY AUTO_INCREMENT,
    id_guichet int,
    id_entrer int,
    FOREIGN KEY (id_guichet) REFERENCES guichets(id),
    FOREIGN KEY (id_entrer) REFERENCES entrees(id)
);

/**/

CREATE TABLE users(
	id int PRIMARY KEY AUTO_INCREMENT,
    utilisateur varchar(50) UNIQUE,
    motdepasse varchar(50) UNIQUE
);

create TABLE roles(
	id int PRIMARY KEY AUTO_INCREMENT,
	name varchar(70)
);

create TABLE user_roles(
    id int PRIMARY KEY AUTO_INCREMENT,
    role_expired date,
    id_user int,
    id_role int,
	FOREIGN KEY (id_user) REFERENCES users(id),
    FOREIGN KEY (id_role) REFERENCES roles(id)
);

create TABLE pages(
	id int PRIMARY KEY AUTO_INCREMENT,
    name varchar(70)
);

create TABLE visibles(
	id int PRIMARY KEY AUTO_INCREMENT,
    id_role int,
    id_page int,
	FOREIGN KEY (id_page) REFERENCES pages(id),
    FOREIGN KEY (id_role) REFERENCES roles(id)
);

create TABLE actions(
	id int PRIMARY KEY AUTO_INCREMENT,
    name varchar(70)
);

create TABLE permissions(
	id int PRIMARY KEY AUTO_INCREMENT,
    id_role int,
    id_action int,
	FOREIGN KEY (id_action) REFERENCES actions(id),
    FOREIGN KEY (id_role) REFERENCES roles(id)
);
